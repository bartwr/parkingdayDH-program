<!-- import polymer-element -->
<link rel="import"  href="https://polygit.org/components/polymer/polymer-element.html">
<!-- import template repeater --> 
<link rel="import"  href="https://polygit.org/components/polymer/lib/elements/dom-repeat.html">

<link rel="import" href="pd-program-item.html">

<dom-module id="pd-program">

  <template>

    <!-- scoped CSS for this element -->
    <style>
      * {
        box-sizing: border-box;
      }
      .pd-program {

      }
      nav {
        font-size: 20px;
        text-align: center;
        background-color: #05d57d;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: row;
        text-align: center;
        height: 50px;
        position:fixed;
        top: 80px;
      }
      @media (min-width: 480px ) {
        nav {
          top: 0;
          position:relative;
          height: 300px;
          align-items: flex-end;
          padding-bottom:15px;
        }
        nav.small {
          height: 50px;
        }
      }
      nav.fixed {
        width:100%;
        position: fixed;
        top: 80px;
      }
      nav a {
        display: inline-block;
        color: #fff;
        text-decoration: none;
        border-bottom: solid 2px transparent;
      }
      nav a.active,
      nav a:hover {
        border-bottom-color: #fff;
      }
      .pd-street-wrapper {
        width: 600px;
        max-width: 100%;
        margin: 0 auto;
      }
      .pd-street-wrapper img {
        max-width:100%;
      }
    </style>

    <div class="pd-program">
      <nav id="pdnav" class="pdnav">
        <a href="#" on-click="clickNav" data-nr="1">Prinsestraat</a>&nbsp;-&nbsp;
        <a href="#" on-click="clickNav" data-nr="2">Wagenstraat</a>&nbsp;-&nbsp;
        <a href="#" on-click="clickNav" data-nr="3">Stationsweg</a>
      </nav>

      <div class="pd-street-wrapper" id="street1">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street1}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

      <div class="pd-street-wrapper" id="street2">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street2}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

      <div class="pd-street-wrapper" id="street3">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street3}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

    </div>

  </template>

  <script>
    class PdProgram extends Polymer.Element {
      static get is() { return "pd-program"; }

      constructor() {
        super();

        this.street1 = [
          {
            nr: '1',
            title: 'Minder parkeren, meer groen & recreëren!',
            details: 'Minder parkeren, meer groen & recreëren! D66 Den Haag wil meer ruimte voor fietsers, groen of spelende kinderen op straat. In ons mini-park wordt gespeeld, gelounged en gedebatteerd. Kom langs!',
            image: 'http://1.bp.blogspot.com/-NRcB9BqOzkE/VTqtibRNoCI/AAAAAAAAC5w/XmFEt7oj1RM/s1600/lentepoets%2B019.JPG',
            url: 'http://denhaag.d66.nl',
            urltext: 'denhaag.d66.nl'
          },
          {
            nr: '2',
            title: 'Het Groentenbed',
            details: 'Hoe fijn zou het zijn om in een moestuin te slapen? Deze parkeerplek is getransformeerd naar een tijdelijk demontabel en groen Groentenbed.',
            image: 'Le details',
            // url: 'www.solarskelter.nl'
          },
          {
            nr: '3',
            title: 'Precious Plastics',
            details: 'Precious Plastic Den Haag bouwt de open-source mini recycle werkplaats. Precious Plastic. Van wegwerpproduct naar kostbaar product.',
            image: 'Le details',
            url: 'http://www.ppdh.nl'
            urltext: 'www.ppdh.nl'
          },
          {
            nr: '4',
            title: 'DeBatMobiel - Ontwerp je eigen Spark!',
            details: 'De DeBatMobiel is een mobiele ontmoetingsplek, die mensen uitnodigt om in gesprek te gaan over de publieke ruimte. Neem plaats om te tekenen en ontwerp een Spark voor in jouw straat!',
            image: 'Le details',
            url: 'http://www.debatmobiel.nl'
            urltext: 'www.debatmobiel.nl'
          },
          {
            nr: '5',
            title: 'Small Matter(s)',
            details: 'An investigation into the beauty of city nature in the Hague City by Charlotte Gramberg who just graduated at the Royal Academy of Art in Graphic Design.',
            image: 'Le details',
            url: 'http://www.charlottegramberg.nl'
            urltext: 'www.charlottegramberg.nl'
          },
          {
            nr: '6',
            title: 'Repair Kid',
            details: 'Repair Kid is een omgetoverde camper die de ruimte geeft aan kinderen om te onderzoeken hoe apparaten in elkaar zitten. De kinderen kunnen met de restan­ ten kunst maken, om te laten zien dat niets hoeft te worden weggegooid.',
            image: 'Le details',
            url: 'http://www.miaw.nl/activiteiten'
            urltext: 'www.miaw.nl/activiteiten'
          }
        ];
        this.street2 = [
          {
            nr: '1',
            title: 'dsa ds',
            details: 'Precious Plastic Den Haag bouwt de open-source mini recycle werkplaats. Precious Plastic. Van wegwerpproduct naar kostbaar product.',
            image: 'Le details',
            url: 'https://www.ppdh.nl'
            urltext: 'ppdh.nl'
          }
        ];
        this.street3 = [
          {
            nr: '1',
            title: 'Solar Skelter',
            details: 'Le details',
            image: 'Le details',
            url: 'Le details'
          }
        ];

        /**

        Home navigation

        On scroll: make top navigation smaller

        */

        self = this
        $(window).on('scroll', function(e){

          if( $(window).width() < 480 ){
            return;
          }

          if ( $('html, body').scrollTop() > 150 ) {
            self.shadowRoot.querySelectorAll('.pdnav').forEach(item => {
              item.classList.add('small');
              item.classList.add('fixed');
            });
          }
          else
            self.shadowRoot.querySelectorAll('.pdnav').forEach(item => {
              item.classList.remove('small');
              item.classList.remove('fixed');
            });

        });

      }

      clickNav(e, detail, sender) {
        var nr = $(e.target).data('nr'), elementToScrollTo;

        if(nr == "1")
          elementToScrollTo = $(this.$.street1);
        else if(nr == "2")
          elementToScrollTo = $(this.$.street2);
        else if(nr == "3")
          elementToScrollTo = $(this.$.street3);

        $('html, body').animate({ 
          scrollTop: elementToScrollTo.offset().top
        }, 250);
      }

    }
    customElements.define(PdProgram.is, PdProgram);
  </script>

</dom-module>

