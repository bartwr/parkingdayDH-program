<!-- import polymer-element -->
<link rel="import"  href="https://polygit.org/components/polymer/polymer-element.html">
<!-- import template repeater --> 
<link rel="import"  href="https://polygit.org/components/polymer/lib/elements/dom-repeat.html">

<link rel="import" href="pd-program-item.html">

<dom-module id="pd-program">

  <template>

    <!-- scoped CSS for this element -->
    <style>
      * {
        box-sizing: border-box;
      }
      .pd-program {

      }
      @media (min-width: 480px ) {
        .pd-program.fixed-nav {
          padding-top: 300px;
        }
      }
      nav {
        font-size: 20px;
        text-align: center;
        background-color: #05d57d;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: row;
        text-align: center;
        height: 50px;
        position:fixed;
        top: 80px;
      }
      @media (min-width: 480px ) {
        nav {
          top: 0;
          position:relative;
          height: 300px;
          align-items: flex-end;
          padding-bottom:15px;
        }
        nav.small {
          height: 50px;
        }
      }
      nav.fixed {
        width:100%;
        position: fixed;
        top: 80px;
      }
      nav a {
        display: inline-block;
        color: #fff;
        text-decoration: none;
        border-bottom: solid 2px transparent;
      }
      nav a.active,
      nav a:hover {
        border-bottom-color: #fff;
      }
      .pd-street-wrapper {
        width: 600px;
        max-width: 100%;
        margin: 0 auto;
      }
      .pd-street-wrapper img {
        max-width:100%;
      }
    </style>

    <div class="pd-program">
      <nav id="pdnav" class="pdnav">
        <a href="#" on-click="clickNav" data-nr="1">Prinsestraat</a>&nbsp;-&nbsp;
        <a href="#" on-click="clickNav" data-nr="2">Wagenstraat</a>&nbsp;-&nbsp;
        <a href="#" on-click="clickNav" data-nr="3">Stationsweg</a>
      </nav>

      <div class="pd-street-wrapper" id="street1">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street1}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

      <div class="pd-street-wrapper" id="street2">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street2}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

      <div class="pd-street-wrapper" id="street3">

        <img src="http://parkingdaydenhaag.nl/wp-content/uploads/2017/05/Route1.png" alt="Straat 1" />

        <template is="dom-repeat" items="{{street3}}">
          <pd-program-item item={{item}} />
        </template>

      </div>

    </div>

  </template>

  <script>
    class PdProgram extends Polymer.Element {
      static get is() { return "pd-program"; }

      constructor() {
        super();

        this.street1 = [
          {
            nr: '1',
            title: 'Minder parkeren, meer groen & recreëren!',
            details: 'Om ruimte in de stad optimaal te benutten, pleit D66 Den Haag voor het verlagen van de autodruk in de straat. De laatste jaren is het aantal aanvragen voor tweede bewonersparkeervergunningen fors gestegen. Wij willen dat de ruimte in de stad weer beschikbaar komt voor fietsers, groen of spelende kinderen. Om die reden willen wij dat de gemeente de kosten van de tweede parkeervergunning aanzienlijk verhoogt om zo het bezit van een tweede auto te ontmoedigen. Als de parkeerdruk boven de 90% komt, wordt er geen tweede parkeervergunning meer afgegeven. Minder parkeren, meer groen & recreëren!',
            image: 'le',
            url: 'http://denhaag.d66.nl',
            urltext: 'denhaag.d66.nl'
          },
          {
            nr: '2',
            title: 'Van Blik - Veld Naar Groenten - Bed…',
            details: 'Voor Park[ing] Day heb ik een Parkeer Plek getransformeerd naar een Tijdelijk – Demontabel- Groen- Groenten Bed. En wat een Mooi Ge- Zicht…! Een gemiddelde parkeerplek neemt ongeveer 7 tot 8 m2 openbare ruimte in beslag. Daar kun je best een bescheiden zelfvoorzienend Groenten-Bed van maken. Je deelt je auto met de buren en gebruikt de vrijgekomen plek voor je Groenten- Bed. De opbrengst kun je ook weer delen, en samen consumeren… Laat 110 sla-kroppen, 32 kolen of 72    preiplanten …Groeien… Want dat heeft de Toekomst:  Meer- Waarde door Delen…',
            image: 'le',
            // url: ''
          },
          {
            nr: '3',
            title: 'Precious Plastics',
            details: 'Precious Plastic is een open-source mini recycle fabriek ontworpen door de Nederlandse designer Dave Hakkens. Iedereen, waar ook ter wereld, krijgt hierdoor de tools in handen om van ‘waardeloos afval’, oftewel: grondstof, nieuwe waardevolle producten te creëren. Wanneer de wind even draait of wij met zonnig weer het strand opzoeken, merk je pas hoe groot ons plastic probleem is. Hoe komt het toch dat er wegwerpproducten gemaakt worden van een materiaal met zo’n lange levensduur? Wij vinden dat dit anders kan en willen het imago van plastic veranderen! Precious Plastic. Van wegwerpproduct naar kostbaar product.',
            image: 'le',
            url: 'http://www.ppdh.nl',
            urltext: 'www.ppdh.nl'
          },
          {
            nr: '4',
            title: 'DeBatMobiel - Ontwerp je eigen Spark!',
            details: 'De DeBatMobiel is een mobiele ontmoetingsplek, die mensen uitnodigt om in gesprek te gaan over de publieke ruimte. Neem plaats om te tekenen en ontwerp een Spark voor in jouw straat!',
            image: 'le',
            url: 'http://www.debatmobiel.nl',
            urltext: 'www.debatmobiel.nl'
          },
          {
            nr: '5',
            title: 'Small Matter(s)',
            details: 'When thinking about nature, the image people often have in their heads is a place untouched by humans. The city, where half of the world’s population lives in, is not considered to be very nature like. But in fact there is actually a lot to be found. And also the nature that there is, is of great importance for us. For example it helps with cooling down our cities, the air pollution and the rain fall.There is so much to discover right outside our doorstep. In Small Matter(s) I attempt to capture the beauty of this city nature.',
            image: 'le',
            url: 'http://www.charlottegramberg.nl',
            urltext: 'www.charlottegramberg.nl'
          },
          {
            nr: '6',
            title: 'Blauwe Regen voor een slimme groene stad',
            details: 'De interventie Blauwe regens voor een Slimme Groene Stad is een bottom up citybranding project waarin bewoners en ondernemers samen op simpele wijze een bijdrage leveren aan hun eigen leefomgeving en hun stad. Het project is gestart in 2014. Het planten van de Blauwe Regens is onderdeel van een hele rustige aanleg van De Groene Loper in Den Haag. Deze verbindt de internationale entree station Hollands Spoor, via het centrum en Keizerstraat, met de kust. Er zijn inmiddels meer dan honderdvijftig blauwe regens geplant! Doe mee, en plant ook een blauwe regen tegen de muur van je buur! Wie weet krijg je er zelf ook één!',
            image: 'le',
            url: 'http://www.lusthofxl.nl/nieuws/blauwe-regen-voor-een-groene-stad-2/',
            urltext: 'www.lusthofxl.nl/nieuws/blauwe-regen-voor-een-groene-stad-2/'
          },
          {
            nr: '7',
            title: 'Repair Kid',
            details: 'Repair Kid is een reizende bus (omgetoverde camper) die op markten, buurtfeesten en andere festiviteiten de ruimte geeft aan kinderen om te onderzoeken hoe apparaten nu eigenlijk in elkaar zitten, door ze de gelegenheid te geven ze te slopen. Dit wordt met gereedschap en onder begeleiding gedaan. Het is de bedoeling dat de kinderen met de restanten kunst maken, om te laten zien dat echt helemaal NIETS hoeft te worden weggegooid. Repair Kid kan voor scholen en naschoolse opvang tegen een zeer laag bedrag (kostendekkend) worden ingezet.',
            image: 'le',
            url: 'http://www.miaw.nl/activiteiten',
            urltext: 'www.miaw.nl/activiteiten'
          }
        ];
        this.street2 = [
          {
            nr: '8',
            title: 'Het Laboratorium voor Microklimaten',
            details: 'Kunstorganisatie het Laboratorium voor Microklimaten (Annechien Meier en Gert-Jan Gerlach)maakt wereldwijd kunstprojecten waarin klimaat, natuur en de mens centraal staan om de gevolgen van klimaatverandering te beperken zoals kunstproject het BijBinnenhofpark, een mini park van wereldformaat en piepkleine oase van rust in de stad Den Haag. Door het weghalen van bestrating voor de opname van regenwater en het tegengaan van warmte wordt een nieuw canvas om moestuintjes en miniparken gecreëerd. Tijdens Park(ing) Day kan met medewerkers van het laboratorium in een performance-workshop worden 'onttegelt' en een een minilandschap naar keuze gemaakt worden.',
            image: 'Le details',
            url: 'http://www.microclimates.nl',
            urltext: 'www.microclimates.nl'
          },
          {
            nr: '9',
            title: 'Fietzerria',
            details: 'Schone lucht staat bij ons centraal. Daarom zeggen wij: geef fietser en voetganger de ruimte, zorg voor betaalbaar en fijnmazig openbaar vervoer, en beperk en spreid autogebruik.',
            image: 'Le details',
            url: 'http://www.haagsestadspartij.nl',
            urltext: 'www.haagsestadspartij.nl'
          },
          {
            nr: '10 ',
            title: 'Buurtcompost',
            details: 'Bewoners uit de buurt rondom de buurtmoestuin Spinozahof in centrum Den Haag kunnen sinds twee  jaar hun GFT afval afleveren in een speciale container die dag en nacht toegankelijk is. Het buurt GFT wordt samen met koffiedik van omliggende horeca en het restgroen van de buurtmoestuin verwerkt tot Zwart Goud, de Buurtcompost. Het composteren wordt verzorgd door bevlogen buurtbewoners onder begeleiding van de stichting LUSTHOFxl. De compostbakkers, die het hun missie hebben gemaakt om heel Nederland te laten composteren, hebben de supervisie. Zou het niet prachtig zijn als iedere straat een parkeerplaats transformeert in een buurtcompost?',
            image: 'Le details',
            url: 'http://www.compostbakkers.nl',
            urltext: 'www.compostbakkers.nl'
          },
          {
            nr: '10',
            title: 'R4A-NI-GHT',
            details: 'Kan ik in plaats van ruimte in beslag nemen ook ruimte geven met mijn auto? Mijn auto blijkt ‘s winters in gebruik als slaapplek voor een onbekende. En dat vind ik prima.',
            image: 'Le details',
            // url: 'http://www.microclimates.nl',
            // urltext: 'www.microclimates.nl'
          },
          {
            nr: '11',
            title: 'Aquaponics',
            details: 'Wist je dat een vijver met vissen een prima compost is voor een moestuin? En dat je de moestuin dan nooit meer water hoeft te geven? Hoe werkt dat? Kom kijken!',
            image: 'Le details',
            // url: 'http://www.microclimates.nl',
            // urltext: 'www.microclimates.nl'
          },
          {
            nr: '12',
            title: 'Gewoon een boom',
            details: 'Het lijkt zo gewoon, een boom. Maar sta je er wel eens bij stil hoe een boom groeit? En wat het voor voor- of nadelen kan geven in de stad? Tom kan je alles vertellen over bomen.',
            image: 'Le details',
            // url: 'http://www.microclimates.nl',
            // urltext: 'www.microclimates.nl'
          },
          {
            nr: '13',
            title: 'Hangplek',
            details: 'What will it be like when people have the freedom to relax out in the streets instead of cars? Why can’t the street always be like this? Come and hang with us!',
            image: 'Le details',
            // url: 'http://www.microclimates.nl',
            // urltext: 'www.microclimates.nl'
          },
          {
            nr: '14',
            title: 'Ranking the Spots',
            details: 'Het ruilen van kruidenzaden voor jouw mening over de stad! Snel, precies en nog leuk ook! Plak jouw sticker op de kaart in ruil voor kruidenzaden: maak de stad eetbaar!',
            image: 'Le details',
            url: 'http://www.context-adviseurs.nl',
            urltext: 'www.context-adviseurs.nl'
          },
        ];
        this.street3 = [
          {
            nr: '15',
            title: 'Welkom op onze Spark',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '16',
            title: 'Picknick in je favoriete park met lekkers van Haagse Oogst',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '17',
            title: 'Eye Contact Experiment',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '18',
            title: 'Keep me in the Loop',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '19',
            title: 'Free Library & deel je droom',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '20',
            title: 'The Shoe Park',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '21',
            title: 'The Bike Park',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '22',
            title: 'Cultuur Soep',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
          {
            nr: '23',
            title: 'DeBatMobiel - Ga in gesprek over de publieke ruimte',
            details: '',
            image: '',
            url: 'http://',
            urltext: ''
          },
        ];

        /**

        Home navigation

        On scroll: make top navigation smaller

        */

        self = this
        $(window).on('scroll', function(e){

          if( $(window).width() < 480 ){
            return;
          }

          var triggerY = 170;
          if ( $('body').hasClass('admin-bar') ) triggerY = 202;
          if ( $('body').scrollTop() > triggerY || $('html').scrollTop() > triggerY ) {
            self.shadowRoot.querySelectorAll('.pd-program').forEach(item => {
              item.classList.add('fixed-nav');
            });
            self.shadowRoot.querySelectorAll('.pdnav').forEach(item => {
              item.classList.add('small');
              item.classList.add('fixed');
            });
          }
          else {
            self.shadowRoot.querySelectorAll('.pd-program').forEach(item => {
              item.classList.remove('fixed-nav');
            });
            self.shadowRoot.querySelectorAll('.pdnav').forEach(item => {
              item.classList.remove('small');
              item.classList.remove('fixed');
            });
          }

        });

      }

      clickNav(e, detail, sender) {
        var nr = $(e.target).data('nr'), elementToScrollTo;

        if(nr == "1")
          elementToScrollTo = $(this.$.street1);
        else if(nr == "2")
          elementToScrollTo = $(this.$.street2);
        else if(nr == "3")
          elementToScrollTo = $(this.$.street3);

        $('html, body').animate({ 
          scrollTop: elementToScrollTo.offset().top - 80 - 50
        }, 250);
      }

    }
    customElements.define(PdProgram.is, PdProgram);
  </script>

</dom-module>

